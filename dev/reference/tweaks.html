<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Tweaks for DBI tests — tweaks • DBItest</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tweaks for DBI tests — tweaks"><meta name="description" content="The tweaks are a way to control the behavior of certain tests. Currently,
you need to search the DBItest source code to understand which tests
are affected by which tweaks. This function is usually called to set the
tweaks argument in a make_context() call."><meta property="og:description" content="The tweaks are a way to control the behavior of certain tests. Currently,
you need to search the DBItest source code to understand which tests
are affected by which tweaks. This function is usually called to set the
tweaks argument in a make_context() call."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DBItest</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.8.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/DBItest.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-dbi/DBItest/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Tweaks for DBI tests</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-dbi/DBItest/blob/main/R/tweaks.R" class="external-link"><code>R/tweaks.R</code></a></small>
      <div class="d-none name"><code>tweaks.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The tweaks are a way to control the behavior of certain tests. Currently,
you need to search the <span class="pkg">DBItest</span> source code to understand which tests
are affected by which tweaks. This function is usually called to set the
<code>tweaks</code> argument in a <code><a href="context.html">make_context()</a></code> call.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tweaks</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  constructor_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  constructor_relax_args <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  strict_identifier <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  omit_blob_tests <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  current_needs_parens <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  union <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">x</span>, collapse <span class="op">=</span> <span class="st">" UNION "</span><span class="op">)</span>,</span>
<span>  placeholder_pattern <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  logical_return <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  date_cast <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"date('"</span>, <span class="va">x</span>, <span class="st">"')"</span><span class="op">)</span>,</span>
<span>  time_cast <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"time('"</span>, <span class="va">x</span>, <span class="st">"')"</span><span class="op">)</span>,</span>
<span>  timestamp_cast <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"timestamp('"</span>, <span class="va">x</span>, <span class="st">"')"</span><span class="op">)</span>,</span>
<span>  blob_cast <span class="op">=</span> <span class="va">identity</span>,</span>
<span>  date_typed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  time_typed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  timestamp_typed <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  temporary_tables <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  list_temporary_tables <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  allow_na_rows_affected <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  is_null_check <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="va">x</span>, <span class="st">" IS NULL)"</span><span class="op">)</span>,</span>
<span>  create_table_as <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">table_name</span>, <span class="va">query</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"CREATE TABLE "</span>, <span class="va">table_name</span>,</span>
<span>    <span class="st">" AS "</span>, <span class="va">query</span><span class="op">)</span>,</span>
<span>  dbitest_version <span class="op">=</span> <span class="st">"1.7.1"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p><code>[any]</code><br>
Unknown tweaks are accepted, with a warning.  The ellipsis
also makes sure that you only can pass named arguments.</p></dd>


<dt id="arg-constructor-name">constructor_name<a class="anchor" aria-label="anchor" href="#arg-constructor-name"></a></dt>
<dd><p><code>[character(1)]</code><br>
Name of the function that constructs the <code>Driver</code> object.</p></dd>


<dt id="arg-constructor-relax-args">constructor_relax_args<a class="anchor" aria-label="anchor" href="#arg-constructor-relax-args"></a></dt>
<dd><p><code>[logical(1)]</code><br>
If <code>TRUE</code>, allow a driver constructor with default values for all
arguments; otherwise, require a constructor with empty argument list
(default).</p></dd>


<dt id="arg-strict-identifier">strict_identifier<a class="anchor" aria-label="anchor" href="#arg-strict-identifier"></a></dt>
<dd><p><code>[logical(1)]</code><br>
Set to <code>TRUE</code> if the DBMS does not support arbitrarily-named
identifiers even when quoting is used.</p></dd>


<dt id="arg-omit-blob-tests">omit_blob_tests<a class="anchor" aria-label="anchor" href="#arg-omit-blob-tests"></a></dt>
<dd><p><code>[logical(1)]</code><br>
Set to <code>TRUE</code> if the DBMS does not support a <code>BLOB</code> data
type.</p></dd>


<dt id="arg-current-needs-parens">current_needs_parens<a class="anchor" aria-label="anchor" href="#arg-current-needs-parens"></a></dt>
<dd><p><code>[logical(1)]</code><br>
Set to <code>TRUE</code> if the SQL functions <code>current_date</code>,
<code>current_time</code>, and <code>current_timestamp</code> require parentheses.</p></dd>


<dt id="arg-union">union<a class="anchor" aria-label="anchor" href="#arg-union"></a></dt>
<dd><p><code>[function(character)]</code><br>
Function that combines several subqueries into one so that the
resulting query returns the concatenated results of the subqueries</p></dd>


<dt id="arg-placeholder-pattern">placeholder_pattern<a class="anchor" aria-label="anchor" href="#arg-placeholder-pattern"></a></dt>
<dd><p><code>[character]</code><br>
A pattern for placeholders used in <code><a href="https://dbi.r-dbi.org/reference/dbBind.html" class="external-link">DBI::dbBind()</a></code>, e.g.,
<code>"?"</code>, <code>"$1"</code>, or <code>":name"</code>. See
<code><a href="make_placeholder_fun.html">make_placeholder_fun()</a></code> for details.</p></dd>


<dt id="arg-logical-return">logical_return<a class="anchor" aria-label="anchor" href="#arg-logical-return"></a></dt>
<dd><p><code>[function(logical)]</code><br>
A vectorized function that converts logical values to the data type
returned by the DBI backend.</p></dd>


<dt id="arg-date-cast">date_cast<a class="anchor" aria-label="anchor" href="#arg-date-cast"></a></dt>
<dd><p><code>[function(character)]</code><br>
A vectorized function that creates an SQL expression for coercing a
string to a date value.</p></dd>


<dt id="arg-time-cast">time_cast<a class="anchor" aria-label="anchor" href="#arg-time-cast"></a></dt>
<dd><p><code>[function(character)]</code><br>
A vectorized function that creates an SQL expression for coercing a
string to a time value.</p></dd>


<dt id="arg-timestamp-cast">timestamp_cast<a class="anchor" aria-label="anchor" href="#arg-timestamp-cast"></a></dt>
<dd><p><code>[function(character)]</code><br>
A vectorized function that creates an SQL expression for coercing a
string to a timestamp value.</p></dd>


<dt id="arg-blob-cast">blob_cast<a class="anchor" aria-label="anchor" href="#arg-blob-cast"></a></dt>
<dd><p><code>[function(character)]</code><br>
A vectorized function that creates an SQL expression for coercing a
string to a blob value.</p></dd>


<dt id="arg-date-typed">date_typed<a class="anchor" aria-label="anchor" href="#arg-date-typed"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for dates.</p></dd>


<dt id="arg-time-typed">time_typed<a class="anchor" aria-label="anchor" href="#arg-time-typed"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for times.</p></dd>


<dt id="arg-timestamp-typed">timestamp_typed<a class="anchor" aria-label="anchor" href="#arg-timestamp-typed"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>FALSE</code> if the DBMS doesn't support a dedicated type for
timestamps.</p></dd>


<dt id="arg-temporary-tables">temporary_tables<a class="anchor" aria-label="anchor" href="#arg-temporary-tables"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>FALSE</code> if the DBMS doesn't support temporary tables.</p></dd>


<dt id="arg-list-temporary-tables">list_temporary_tables<a class="anchor" aria-label="anchor" href="#arg-list-temporary-tables"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>FALSE</code> if the DBMS doesn't support listing temporary tables.</p></dd>


<dt id="arg-allow-na-rows-affected">allow_na_rows_affected<a class="anchor" aria-label="anchor" href="#arg-allow-na-rows-affected"></a></dt>
<dd><p><code>[logical(1L)]</code><br>
Set to <code>TRUE</code> to allow <code><a href="https://dbi.r-dbi.org/reference/dbGetRowsAffected.html" class="external-link">DBI::dbGetRowsAffected()</a></code> to return <code>NA</code>.</p></dd>


<dt id="arg-is-null-check">is_null_check<a class="anchor" aria-label="anchor" href="#arg-is-null-check"></a></dt>
<dd><p><code>[function(character)]</code><br>
A vectorized function that creates an SQL expression for checking if a
value is <code>NULL</code>.</p></dd>


<dt id="arg-create-table-as">create_table_as<a class="anchor" aria-label="anchor" href="#arg-create-table-as"></a></dt>
<dd><p><code>[function(character(1), character(1))]</code><br>
A function that creates an SQL expression for creating a table
from an SQL expression.</p></dd>


<dt id="arg-dbitest-version">dbitest_version<a class="anchor" aria-label="anchor" href="#arg-dbitest-version"></a></dt>
<dd><p><code>[character(1)]</code><br>
Compatible DBItest version, default: "1.7.1".</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="context.html">make_context</a></span><span class="op">(</span><span class="va">...</span>, tweaks <span class="op">=</span> <span class="fu">tweaks</span><span class="op">(</span>strict_identifier <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://krlmlr.info" class="external-link">Kirill Müller</a>, R Consortium.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

